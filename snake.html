<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Snake Game</title>

<style>
body {
    margin: 0;
    height: 100vh;
    background: #1c1c1c;
    color: white;
    font-family: Arial, sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
}

#menu button {
    padding: 15px 30px;
    font-size: 20px;
    margin: 10px;
    cursor: pointer;
}

#game-board {
    width: 600px;
    height: 600px;
    background: #222;
    border: 5px solid white;
    position: relative;
    display: none;
}

.snake {
    position: absolute;
    width: 20px;
    height: 20px;
}

.food {
    position: absolute;
    width: 20px;
    height: 20px;
    background: #ff5733;
    border-radius: 50%;
}

#score {
    margin: 10px;
    font-size: 20px;
}

#game-over {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.8);
    display: none;
    align-items: center;
    justify-content: center;
    flex-direction: column;
    font-size: 30px;
}
#game-over button {
    margin-top: 20px;
    padding: 10px 25px;
    font-size: 18px;
}
</style>
</head>

<body>

<div id="menu">
    <h1>Snake Game</h1>
    <button onclick="startGame(1)">Single Player</button>
    <button onclick="startGame(2)">Two Players</button>
</div>

<div id="score">P1: 0 | P2: 0</div>
<div id="game-board"></div>

<div id="game-over">
    <div id="result"></div>
    <button onclick="resetGame()">Restart</button>
</div>

<script>
/* ================= CONFIG ================= */
const BOARD_SIZE = 600;
const CELL = 20;
const SPEED = 100;

/* ================= STATE ================= */
let gameMode = 1;
let gameInterval = null;
let gameOver = false;

let snake1, snake2;
let dir1, dir2;
let score1, score2;
let food;

/* ================= DOM ================= */
const board = document.getElementById("game-board");
const scoreEl = document.getElementById("score");
const gameOverEl = document.getElementById("game-over");
const resultEl = document.getElementById("result");

/* ================= INIT ================= */
function initGame() {
    snake1 = [{x: 100, y: 100}];
    snake2 = [{x: 400, y: 100}];
    dir1 = "RIGHT";
    dir2 = "LEFT";
    score1 = 0;
    score2 = 0;
    gameOver = false;
    spawnFood();
    updateScore();
}

/* ================= GAME LOOP ================= */
function gameLoop() {
    if (gameOver) return;

    clearBoard();

    moveSnake(snake1, dir1, 1);
    if (gameMode === 2) {
        moveSnake(snake2, dir2, 2);
    }

    drawFood();
    drawSnake(snake1, "#00ff00");
    if (gameMode === 2) drawSnake(snake2, "#00aaff");
}

/* ================= MOVE ================= */
function moveSnake(snake, dir, player) {
    const head = {...snake[0]};

    if (dir === "UP") head.y -= CELL;
    if (dir === "DOWN") head.y += CELL;
    if (dir === "LEFT") head.x -= CELL;
    if (dir === "RIGHT") head.x += CELL;

    // collision
    if (isCollision(head, snake)) {
        endGame();
        return;
    }

    snake.unshift(head);

    if (head.x === food.x && head.y === food.y) {
        if (player === 1) score1++;
        else score2++;
        spawnFood();
        updateScore();
    } else {
        snake.pop();
    }
}

/* ================= COLLISION ================= */
function isCollision(head, snake) {
    // wall
    if (
        head.x < 0 || head.x >= BOARD_SIZE ||
        head.y < 0 || head.y >= BOARD_SIZE
    ) return true;

    // self
    for (let i = 1; i < snake.length; i++) {
        if (head.x === snake[i].x && head.y === snake[i].y) {
            return true;
        }
    }
    return false;
}

/* ================= DRAW ================= */
function clearBoard() {
    board.innerHTML = "";
}

function drawSnake(snake, color) {
    snake.forEach(seg => {
        const d = document.createElement("div");
        d.className = "snake";
        d.style.background = color;
        d.style.left = seg.x + "px";
        d.style.top = seg.y + "px";
        board.appendChild(d);
    });
}

function drawFood() {
    const f = document.createElement("div");
    f.className = "food";
    f.style.left = food.x + "px";
    f.style.top = food.y + "px";
    board.appendChild(f);
}

/* ================= FOOD ================= */
function spawnFood() {
    food = {
        x: Math.floor(Math.random() * (BOARD_SIZE / CELL)) * CELL,
        y: Math.floor(Math.random() * (BOARD_SIZE / CELL)) * CELL
    };
}

/* ================= UI ================= */
function updateScore() {
    scoreEl.textContent = `P1: ${score1} | P2: ${score2}`;
}

function endGame() {
    gameOver = true;
    clearInterval(gameInterval);
    resultEl.innerHTML = `
        Game Over<br/>
        Player 1: ${score1}<br/>
        Player 2: ${score2}
    `;
    gameOverEl.style.display = "flex";
}

/* ================= CONTROL ================= */
window.addEventListener("keydown", e => {
    if (e.key === "w" && dir1 !== "DOWN") dir1 = "UP";
    if (e.key === "s" && dir1 !== "UP") dir1 = "DOWN";
    if (e.key === "a" && dir1 !== "RIGHT") dir1 = "LEFT";
    if (e.key === "d" && dir1 !== "LEFT") dir1 = "RIGHT";

    if (e.key === "ArrowUp" && dir2 !== "DOWN") dir2 = "UP";
    if (e.key === "ArrowDown" && dir2 !== "UP") dir2 = "DOWN";
    if (e.key === "ArrowLeft" && dir2 !== "RIGHT") dir2 = "LEFT";
    if (e.key === "ArrowRight" && dir2 !== "LEFT") dir2 = "RIGHT";
});

/* ================= START / RESET ================= */
function startGame(mode) {
    gameMode = mode;
    document.getElementById("menu").style.display = "none";
    board.style.display = "block";
    gameOverEl.style.display = "none";
    initGame();
    gameInterval = setInterval(gameLoop, SPEED);
}

function resetGame() {
    clearInterval(gameInterval);
    startGame(gameMode);
}
</script>

</body>
</html>
